# Captive Portal Configuration for Neuroion Setup
# Redirects all requests to setup page during SoftAP mode

server {
    listen 80;
    server_name _;
    
    # Redirect all requests to setup page
    location / {
        return 302 http://192.168.4.1/setup;
    }
    
    # Allow setup page
    location /setup {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # Allow API calls
    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
